//*~~~> SPDX-License-Identifier: MIT OR Apache-2.0
/*~~~~>
    Thank you Phunks, your inspiration and phriendship meant the world to me and helped me through hard times.
      Never stop phighting, never surrender, always stand up for what is right and make the best of all situations towards all people.
      Phunks are phreedom phighters!
        "When the power of love overcomes the love of power the world will know peace." - Jimi Hendrix <3

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((((((((((((@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@(((((((((((((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((((((((((((@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@(((((((((((((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((((((((((((((((((((((@@@@@##############################%%%%%@@@@@((((((((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((((((((((((((((((((((@@@@@##############################%%%%%@@@@@((((((((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((@@@@@########################################%%%%%@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((@@@@@########################################%%%%%@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((((((((((((@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@###############@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((((((((((((@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@###############@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@##########@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@##########@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((SMOKE((((((((((@@@@@/////////////////////////////////////////////@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((SMOKE((((((((((@@@@@/////////////////////////////////////////////@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((SMOKE((((((((((@@@@@#PHUNKYJON///////////////#PHUNKYJON//////////@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((SMOKE((((((((((@@@@@#PHUNKYJON///////////////#PHUNKYJON//////////@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((SMOKE((((((((((@@@@@/////@EYES////////////////////@EYES///////////////@@@@@((((((((((((((((((((%%%%%
%%%%%(((((((((((((((SMOKE((((((((((@@@@@/////@EYES////////////////////@EYES///////////////EAR@@((((((((((((((((((((%%%%%
%%%%%(((((((((((((((SMOKE((((((((((@@@@@//////////////////////////////////////////////////EAR@@((((((((((((((((((((%%%%%
%%%%%(((((((((((((((SMOKE((((((((((@@@@@//////////////////////////////////////////////////EAR@@((((((((((((((((((((%%%%%
%%%%%(((((((((((((((SMOKE((((((((((@@@@@/////////////////////////////////////////////@@@@@@@@@@((((((((((((((((((((%%%%%
%%%%%(((((((((((((((SMOKE((((((((((@@@@@/////////////////////////////////////////////@@@@@@@@@@((((((((((((((((((((%%%%%
%%%%%(((((((((((((((SMOKE((((((((((@@@@@//////////NOSE@NOSE@////////////////////#####@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((SMOKE((((((((((@@@@@//////////NOSE@NOSE@////////////////////#####@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((@@@@@#####//////////////////////////////##########@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((@@@@@#####//////////////////////////////##########@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((@SPLIFF@SPLIFF@SPLIFF@SPLIFF@@###################################@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((@SPLIFF@SPLIFF@SPLIFF@SPLIFF@@###################################@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((EMBER(((((,,,,,,,,,,,,,,,,,,,,,,,,,@@@@@MOUTH&&&&&####################@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((EMBER(((((,,,,,,,,,,,,,,,,,,,,,,,,,@@@@@MOUTH&&&&&####################@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((@SPLIFF@SPLIFF@SPLIFF@SPLIFF@@##############################/////@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((@SPLIFF@SPLIFF@SPLIFF@SPLIFF@@##############################/////@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((((((((((((((((((((((@@@@@##############################//////////@@@@@(((((((((((((((((((((((((%%%%%
%%%%%(((((((((((((((((((((((((((((((((((@@@@@##############################//////////@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((((((((((((@@@@@@@@@@@@@@@@@@@@@@@@@///////////////@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((((((((((((@@@@@@@@@@@@@@@@@@@@@@@@@///////////////@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((@@@@@///////////////@@@@@(((((((((((((((((((((((((%%%%%
%%%%%((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((@@@@@///////////////@@@@@(((((((((((((((((((((((((%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@///////////////@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@///////////////@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

 <~~~*/
 pragma solidity 0.8.12;

import "@openzeppelin/contracts/access/AccessControl.sol";
import "./interfaces/IRoleProvider.sol";

contract MarketRoleProvider is AccessControl, IRoleProvider {

  address public marketplaceAdd;
  address public daoAdd;
  address public nftAdd;
  address public marketMintAdd;
  address public collectionsAdd;
  address public offersAdd;
  address public tradesAdd;
  address public bidsAdd;
  address public rewardsAdd;
  address public roleAdd;
  address public ownerProxyAdd;
  address public PHUNKYAdd;
  address public devSig;

  mapping (bytes32 => address) marketBytes;

  /*~~~>
    Roles allow for designated accessibility
  <~~~*/
  bytes32 public constant PROXY_ROLE = keccak256("PROXY_ROLE");
  bytes32 public constant CONTRACT_ROLE = keccak256("CONTRACT_ROLE");
  bytes32 public constant DEV_ROLE = keccak256("DEV_ROLE");

  //*~~~> For tracking contract addresses
  bytes32 public constant DAO = keccak256("DAO"); 
  bytes32 public constant DEV = keccak256("DEV");
  bytes32 public constant NFT = keccak256("NFT");
  bytes32 public constant MINT = keccak256("MINT");
  bytes32 public constant BIDS = keccak256("BIDS");
  bytes32 public constant ROLE = keccak256("ROLE");
  bytes32 public constant PROXY = keccak256("PROXY");
  bytes32 public constant OFFERS = keccak256("OFFERS");
  bytes32 public constant TRADES = keccak256("TRADES");
  bytes32 public constant PHUNKY = keccak256("PHUNKY");
  bytes32 public constant MARKET = keccak256("MARKET");
  bytes32 public constant REWARDS = keccak256("REWARDS");
  bytes32 public constant COLLECTION = keccak256("COLLECTION");

  /*~~~>
    Error message for unauthorized access
  <~~~*/
  string Mess = "DOES NOT HAVE ADMIN ROLE";

  /*~~~>
    Sets deployment address as default admin role
  <~~~*/
  constructor(address _controller) {
      _setupRole(DEFAULT_ADMIN_ROLE,_controller);
      _setupRole(PROXY_ROLE, _controller);
      _setupRole(DEV_ROLE, _controller);
  }

  modifier hasAdmin(){
    require(hasRole(PROXY_ROLE, msg.sender), Mess);
    _;
  }

  ///@notice For setting new roles
  /*
   bytes32 key: bytes of the role desired
   address _sig: address of the contract to be assigned the role
   */
  function setAddressGivenBytes(bytes32 key, address _sig) external hasAdmin returns(bool) {
    marketBytes[key] = _sig;
    return true;
  }

  function setDaoAdd(address _daoAdd) hasAdmin external returns(bool){
    daoAdd = _daoAdd;
    marketBytes[DAO]= _daoAdd;
    return true;
  }
  function setMarketAdd(address _mrktAdd) hasAdmin external returns(bool){
    marketplaceAdd = _mrktAdd;
    marketBytes[MARKET]= _mrktAdd;
    return true;
  }
  function setNftAdd(address _nftAdd) hasAdmin external returns(bool){
    nftAdd = _nftAdd;
    marketBytes[NFT]= _nftAdd;
    return true;
  }
  function setMarketMintAdd(address _mintAdd) hasAdmin external returns(bool){
    marketMintAdd = _mintAdd;
    marketBytes[MINT] = _mintAdd;
    return true;
  }
   function setCollectionsAdd(address _collAdd) hasAdmin external returns(bool){
    collectionsAdd = _collAdd;
    marketBytes[COLLECTION] = _collAdd;
    return true;
  }
  function setOffersAdd(address _offAdd) hasAdmin external returns(bool){
    offersAdd = _offAdd;
    marketBytes[OFFERS] = _offAdd;
    return true;
  }
  function setTradesAdd(address _tradAdd) hasAdmin external returns(bool){
    tradesAdd = _tradAdd;
    marketBytes[TRADES] = _tradAdd;
    return true;
  }
  function setBidsAdd(address _bidsAdd) hasAdmin external returns(bool){
    bidsAdd = _bidsAdd;
    marketBytes[BIDS] = _bidsAdd;
    return true;
  }
  function setRwdsAdd(address _rwdsAdd) hasAdmin external returns(bool){
    rewardsAdd = _rwdsAdd;
    marketBytes[REWARDS] = _rwdsAdd;
    return true;
  }
  function setRoleAdd(address _role) external hasAdmin returns(bool){
    roleAdd = _role;
    marketBytes[ROLE] = _role;
    return true;
  }
  function setOwnerProxyAdd(address _proxyAdd) external hasAdmin returns(bool){
    ownerProxyAdd = _proxyAdd;
    marketBytes[PROXY]=_proxyAdd;
    return true;
  }
  function setPhunkyAdd(address _phunky) external hasAdmin returns(bool) {
    PHUNKYAdd = _phunky;
    marketBytes[PHUNKY] = _phunky;
    return true;
  }
  function setDevSigAddress(address _sig) external hasAdmin returns(bool){
    devSig = _sig;
    marketBytes[DEV] = _sig;
    return true;
  }
  function setDevRole(address _sig) external hasAdmin returns(bool){
    marketBytes[DEV_ROLE] = _sig;
  }

  function fetchAddress(bytes32 _var) external view returns(address){
    return marketBytes[_var];
  }

  function hasTheRole(bytes32 role, address _address) external view returns(bool){
    return hasRole(role, _address);
  }

  function hasContractRole(address _address) external view returns(bool){
    if(_address == marketBytes[MARKET]){
      return true;
    }
    if (_address == marketBytes[BIDS]){
      return true;
    }
    if(_address == marketBytes[OFFERS]){
      return true;
    }
    if(_address == marketBytes[TRADES]){
      return true;
    }
    if(_address == marketBytes[MINT]){
      return true;
    } 
    return false;
  }

  ///@notice
  /*~~~> External ETH transfer forwarded to controller contract <~~~*/
  event FundsForwarded(uint value, address _from, address _to);
  receive() external payable {
    payable(ownerProxyAdd).transfer(msg.value);
      emit FundsForwarded(msg.value, msg.sender, ownerProxyAdd);
  }

  ///@notice
  //*~~~> Withdraw function for any stuck ETH sent
  function withdrawAmountFromContract(address _add) hasAdmin external {
      payable(_add).transfer(address(this).balance);
   }
}
